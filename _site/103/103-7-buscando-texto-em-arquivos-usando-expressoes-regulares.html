<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>103.7 Buscar texto em arquivos usando expressões regulares (Peso 2)</title>
  <meta name="description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.
">

  <link rel="stylesheet" href="/lpic1/css/main.css">
  <link rel="stylesheet" href="/lpic1/css/prism.css">
  <link rel="canonical" href="/lpic1/103/103-7-buscando-texto-em-arquivos-usando-expressoes-regulares">
  <link rel="alternate" type="application/rss+xml" title="Livro LPIC 101 - O Curso" href="/lpic1/feed.xml">
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/lpic1/">Livro LPIC 101 - O Curso</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
          <a class="page-link" href="/lpic1/indice/">Indice</a>
          
        
          
        
          
          <a class="page-link" href="/lpic1/inicio/">Inicio</a>
          
        
          
        
          
        
          
        
          
        
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title">103.7 Buscar texto em arquivos usando expressões regulares (Peso 2)</h1>
  </header>

  <div class="post-content">
    <p>Candidatos devem ter a capacidade de manipular arquivos e dados de textoutilizando expressões regulares. Esse topico inclui a criação de de expressões regulares simples contendo diversas notações. E tambem inclui a tulização dessas expressoes e ferramentas para relizar buscas pelo sistema de arquivos e conteudo de arquivos.</p>

<h2 id="grep1031037-buscando-texto-em-arquivos-usando-expressoes-regularesgrep"><a href="/103/103.7-buscando-texto-em-arquivos-usando-expressoes-regulares#grep">grep</a></h2>

<p>O grep imprime as linhas de acordo com um padrão. No exemplo abaixo eu procuro pela palara <code class="highlighter-rouge">dolor</code> dentro do arquivo <code class="highlighter-rouge">texto.txt</code></p>

<div class="highlighter-rouge"><pre class="highlight"><code>usuario@pc:$ grep dolor texto.txt
</code></pre>
</div>

<p>O comando retorna todas as linhas que contem a ocorrencia da palavra <code class="highlighter-rouge">dolor</code>:</p>

<p>Lorem ipsum <span class="red">dolor</span> sit amet, consectetur adipiscing elit. Integer metus quam, dictum efficitur accumsan ac, fringilla sed leo. Phasellus ut sagittis quam, sit amet cursus ex. Aenean pharetra sagittis purus in sagittis. Aenean sagittis id risus at scelerisque. Pellentesque arcu ex, consectetur vitae tellus vel, efficitur tincidunt sapien. In finibus maximus erat, a maximus tortor volutpat eget. Quisque fringilla dignissim commodo. Cras id ipsum ac dui pretium elementum. Mauris aliquet enim nisi, vel pellentesque quam commodo egestas. Cras dapibus nec sem sed porttitor. Quisque eget elementum ante.
Etiam sed tortor consectetur, facilisis libero quis, consequat eros. Phasellus venenatis bibendum viverra. Sed varius varius massa eget suscipit. Curabitur lacinia eros bibendum sapien porttitor, et tincidunt tortor aliquet. Donec volutpat, leo eu vehicula condimentum, justo lacus tempus nunc, eget fermentum felis velit vel arcu. Sed id tempus magna. Aenean in urna et mi euismod luctus. Quisque ac massa leo. Nulla mollis nisl vitae felis faucibus luctus. Lorem ipsum <span class="red">dolor</span> sit amet, consectetur adipiscing elit. Fusce eget nisl fringilla <span class="red">dolor</span> faucibus sagittis.
Suspendisse in velit a <span class="red">dolor</span> convallis bibendum faucibus et turpis. Nullam rhoncus eros vel aliquet mattis. Phasellus auctor ante vel enim tincidunt, in lacinia metus semper. Vestibulum porta nec urna id blandit. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Vivamus elementum, mauris quis egestas tristique, urna augue tincidunt elit, eu sodales massa urna ut purus. Praesent pulvinar, justo sit amet blandit ultricies, odio justo volutpat <span class="red">dolor</span>, et ornare eros tellus nec neque. Donec tempus pulvinar arcu, ac scelerisque felis eleifend quis. Maecenas vitae ante ut turpis blandit hendrerit. Aenean orci nunc, commodo a diam consectetur, fringilla venenatis felis. Interdum et malesuada fames ac ante ipsum primis in faucibus. Pellentesque et commodo <span class="red">dolor</span>, tempus feugiat neque. Nullam vitae ex a turpis cursus eleifend in a ipsum.</p>

<p>Podemos utilizar o parametro <code class="highlighter-rouge">-c</code> que conta o número de vezes que a palavra é encontrada.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>usuario@pc:$ grep -c dolor texto.txt
3
</code></pre>
</div>

<blockquote>
Aqui surge um problema. O grep conta as ocorrencias por linha mas a palavra `dolor` surge diversas verzes na mesma linha e o grep ignora isso. Como fazer para o grep contar o número de ocorrencias mesmo que seja na mesma linha.
</blockquote>

<p>Existe o parametro <code class="highlighter-rouge">-v</code> que inverte o resultado exibindo as linhas que o padrão não é encontrado:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>usuario@maquina:$ grep -v dolor texto.txt
</code></pre>
</div>

<p>Podemos também utilizar o parametro <code class="highlighter-rouge">-i</code> que realiza a busca de modo case insensitive:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>usuario@maquina:$ grep -i Lorem texto.txt	
</code></pre>
</div>

<p><span class="red">Lorem</span> ipsum dolor sit amet, consectetur adipiscing elit. Integer metus quam, dictum efficitur accumsan ac, fringilla sed leo. Phasellus ut sagittis quam, sit amet cursus ex. Aenean pharetra sagittis purus in sagittis. Aenean sagittis id risus at scelerisque. Pellentesque arcu ex, consectetur vitae tellus vel, efficitur tincidunt sapien. In finibus maximus erat, a maximus tortor volutpat eget. Quisque fringilla dignissim commodo. Cras id ipsum ac dui pretium elementum. Mauris aliquet enim nisi, vel pellentesque quam commodo egestas. Cras dapibus nec sem sed porttitor. Quisque eget elementum ante.
Etiam sed tortor consectetur, facilisis libero quis, consequat eros. Phasellus venenatis bibendum viverra. Sed varius varius massa eget suscipit. Curabitur lacinia eros bibendum sapien porttitor, et tincidunt tortor aliquet. Donec volutpat, leo eu vehicula condimentum, justo lacus tempus nunc, eget fermentum felis velit vel arcu. Sed id tempus magna. Aenean in urna et mi euismod luctus. Quisque ac massa leo. Nulla mollis nisl vitae felis faucibus luctus. <span class="red">Lorem</span> ipsum dolor sit amet, consectetur adipiscing elit. Fusce eget nisl fringilla dolor faucibus sagittis.
Quisque malesuada sed metus eget fringilla. Curabitur blandit nisi id velit ornare, nec pulvinar dui gravida. Curabitur vel rhoncus lectus, vel accumsan ligula. In scelerisque, ipsum ac convallis scelerisque, nunc urna dapibus tellus, non tincidunt quam risus facilisis neque. Aenean in ante vitae mauris ultricies dapibus a eu magna. Curabitur aliquet faucibus nisl, eget pellentesque ante lacinia non. Nullam et leo condimentum, tempus ligula eu, semper massa. Mauris ut posuere lectus. Nulla tincidunt malesuada arcu, eu ultricies arcu varius a. Nulla id quam augue. Morbi ut mi sed dui egestas tempor. Nulla hendrerit pulvinar ex in luctus. Fusce bibendum quis velit ut molestie. Donec blandit volutpat purus in tristique. Morbi justo <span class="red">Lorem </span>ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
proident, sunt in culpa qui officia deserunt mollit anim id est laborum, <span class="red">lorem</span> mollis at ullamcorper ac, posuere mollis odio. Nam pharetra, turpis a pulvinar dapibus, velit libero pulvinar quam, eget commodo magna enim ut ipsum.</p>

<p>O grep aceita o file <code class="highlighter-rouge">globbing</code> então podemos usar um asterisco para buscar em todos os arquivos do diretorio corrente.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>usuario@maquina:$ grep -c Lorem *  
outro-texto.txt:0
grep: subdir: É uma directoria
subdir:0
texto-mais-simples.txt:0
texto.txt:3
</code></pre>
</div>

<p>Podemos realizar buscas de forma recursiva usando <code class="highlighter-rouge">-r</code>. O Exemplo abaixo mostra a utilização da busca recursiva em conjunto com o <code class="highlighter-rouge">globbing</code>.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>alphabraga@sharp:~/lpi/grep$ grep -cr lorem * 
outro-texto.txt:0
subdir/another-subdir/texto.txt:1
subdir/texto.txt:1
texto-mais-simples.txt:0
texto.txt:1
</code></pre>
</div>

<p>Existem várias vertentes de expressões regulares:</p>

<h3 id="grep--e">grep -E</h3>

<p>É o mesmo que utilizar o comando egrep seria um padrão chamado regular expression extented</p>

<h2 id="egrep1031037-buscando-texto-em-arquivos-usando-expressoes-regularesgrep"><a href="/103/103.7-buscando-texto-em-arquivos-usando-expressoes-regulares#grep">egrep</a></h2>

<h2 id="fgrep1031037-buscando-texto-em-arquivos-usando-expressoes-regularesfgrep"><a href="/103/103.7-buscando-texto-em-arquivos-usando-expressoes-regulares#fgrep">fgrep</a></h2>

<h2 id="sed1031037-buscando-texto-em-arquivos-usando-expressoes-regularessed"><a href="/103/103.7-buscando-texto-em-arquivos-usando-expressoes-regulares#sed">sed</a></h2>

<h2 id="regex71031037-buscando-texto-em-arquivos-usando-expressoes-regularesregex-7"><a href="/103/103.7-buscando-texto-em-arquivos-usando-expressoes-regulares#regex-7">regex(7)</a></h2>

  </div>

</article>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">Livro LPIC 101 - O Curso</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>Livro LPIC 101 - O Curso</li>
          <li><a href="mailto:alfredorodruguesbraga@gmail.com">alfredorodruguesbraga@gmail.com</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/alphabraga"><span class="icon icon--github"><svg viewBox="0 0 16 16"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">alphabraga</span></a>

          </li>
          

          
          <li>
            <a href="https://twitter.com/alphabraga"><span class="icon icon--twitter"><svg viewBox="0 0 16 16"><path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg>
</span><span class="username">alphabraga</span></a>

          </li>
          
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.
</p>
      </div>
    </div>

  </div>

</footer>


  <script type="text/javascript" src="/lpic1/js/prism.js" ></script>  
  </body>

</html>
