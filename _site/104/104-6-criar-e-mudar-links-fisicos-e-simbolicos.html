<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>104.5 Criar e Mudar links Físicos e Simbolicos (Peso 2)</title>
  <meta name="description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.
">

  <link rel="stylesheet" href="/lpic1/css/main.css">
  <link rel="stylesheet" href="/lpic1/css/prism.css">
  <link rel="canonical" href="/lpic1/104/104-6-criar-e-mudar-links-fisicos-e-simbolicos">
  <link rel="alternate" type="application/rss+xml" title="Livro LPIC 101 - O Curso" href="/lpic1/feed.xml">
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/lpic1/">Livro LPIC 101 - O Curso</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
          <a class="page-link" href="/lpic1/indice/">Indice</a>
          
        
          
        
          
          <a class="page-link" href="/lpic1/inicio/">Inicio</a>
          
        
          
        
          
        
          
        
          
        
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title">104.5 Criar e Mudar links Físicos e Simbolicos (Peso 2)</h1>
  </header>

  <div class="post-content">
    <p>Cirar e gerenciar links físicos e simbolicos em um arquivo.</p>

<ul>
  <li>Criar links</li>
  <li>Identificar links fisicos e simbolicos</li>
  <li>Copiar versus linking files</li>
  <li>Utilizar links para dar suporte a tarefas administrativas de sistema</li>
</ul>

<h2 id="ln">ln</h2>

<h3 id="links-fsicos-ou-hard-links">Links Físicos ou Hard Links</h3>

<p>Links são apontamentos para arquivos. A utilização de links é bem comum para facilitar a administração do sistema.</p>

<p>Para exemplificar melhor vamos criar um arquivo chamado <code class="highlighter-rouge">aplicacao.conf</code></p>

<pre class="language-bash command-line" data-user="alphabraga" data-host="localhost">
<code>echo "Minhas Configurações" &gt; aplicacao.conf</code>
</pre>

<p>Agora vamos criar um link físico desse arquivo. Para fazer isso basta utilizar o comando <code class="highlighter-rouge">ln</code></p>

<pre class="language-bash command-line" data-user="alphabraga" data-host="localhost">
<code>ln aplicacao.conf ap.conf</code>
</pre>

<p>Com o comando acima criamos um arquivo, ou melhor, um link físico do arquivo <code class="highlighter-rouge">aplicacao.conf</code> chamado <code class="highlighter-rouge">app.conf</code>. Se executarmos o comando <code class="highlighter-rouge">ls</code> nesses dois arquivos com o parametro <code class="highlighter-rouge">-i</code> veremos que os dois apontam para o mesmo <code class="highlighter-rouge">inode</code>.</p>

<pre class="language-bash command-line" data-user="alphabraga" data-host="localhost">
<code>ls -li app.conf aplicacao.conf</code>
11010096 -rw-rw-r-- 2 alphabraga alphabraga 23 Abr 11 22:09 aplicacao.conf
11010096 -rw-rw-r-- 2 alphabraga alphabraga 23 Abr 11 22:09 app.conf
</pre>

<p>A primeira coluna do output do comando <code class="highlighter-rouge">ls</code> exibe os <code class="highlighter-rouge">inodes</code> dos arquivos. Fica evidente que os dois arquivos tanto o link físico e o arquivo possuem o mesmo número de <code class="highlighter-rouge">inode</code>, ou seja, os dois arquivos na verdade apontam para o mesmo endereço no disco o que significa que os dois possuem o mesmo conteudo. Executando um <code class="highlighter-rouge">cat</code> nos dois arquivos podemos comprovar isso.</p>

<pre class="language-bash command-line" data-user="alphabraga" data-host="localhost">
<code>cat aplicacao.conf </code>
Minhas Configurações
<code>cat app.conf </code>
Minhas Configurações
</pre>

<p>Uma alteração realizada utilizando o arquivo <code class="highlighter-rouge">app.conf</code> afeta o <code class="highlighter-rouge">aplicacao.conf</code>. Isso porque na verdade eles representam o mesmo endereço no disco. Podemos observar isso abaixo:</p>

<pre class="language-bash command-line" data-user="alphabraga" data-host="localhost">
<code>"Novas Configurações" &gt;&gt; aplicacao.conf </code>
<code>cat app.conf </code>
Minhas Configurações
Novas Configurações
</pre>

<p>Mesmo alterando apenas o arquivo <code class="highlighter-rouge">aplicacao.conf</code> o arquivo <code class="highlighter-rouge">app.conf</code> tambem exeibe as modificações.</p>

<p>Caso seja realizada a exclusão de um dos arquivos (link ou arquivo) nada ocorre. A exclusão de um não interfere no outro.</p>

<p>Não é possivel criar links físicos em partições distintas. Veja no exemplo abaixo onde o usuario tenta criar links físicos em partições distintas.</p>

<pre class="language-bash command-line" data-user="alphabraga" data-host="localhost">
<code>df -h</code>
Sist.fichs      Tama  Ocup Livre Uso% Montado em
udev            1,9G     0  1,9G   0% /dev
tmpfs           385M  6,3M  378M   2% /run
/dev/sda2       231G   71G  149G  33% /
tmpfs           1,9G  4,2M  1,9G   1% /dev/shm
tmpfs           5,0M  4,0K  5,0M   1% /run/lock
tmpfs           1,9G     0  1,9G   0% /sys/fs/cgroup
/dev/sda1       511M  3,5M  508M   1% /boot/efi
tmpfs           385M   52K  385M   1% /run/user/1000
<code>touch /boot/efi/teste</code>
<code>ln /boot/efi/teste /link-teste</code>
ln: falhou ao criar hard link '/link-teste' =&gt; '/boot/efi/teste': Link entre dispositivos inválido
</pre>

<p><strong>Não é permitida a criação de links físicos de pastas</strong>. Veja abaixo:</p>

<pre class="language-bash command-line" data-user="alphabraga" data-host="localhost">
<code>mkdir minhas-configs</code>
<code>ln minhas-configs link-minhas-configs</code>
ln: minhas-configs: ligação persistente não autorizada para a pasta
</pre>

<h3 id="links-simbolicos">Links Simbolicos</h3>

<p>O para criar links simbolicos utilizamos o comando <code class="highlighter-rouge">ln</code> com parametro <code class="highlighter-rouge">-s</code>. Veja o exemplo abaixo:</p>

<pre class="language-bash command-line" data-user="alphabraga" data-host="localhost">
<code>touch novas-configs.app</code>
<code>ln -s novas-configs.app link-novas-configs</code>
<code>ls -li novas-configs.app link-novas-configs</code>
11010574 lrwxrwxrwx 1 alphabraga alphabraga 17 Abr 11 22:44 link-novas-configs -&gt; novas-configs.app
11010481 -rw-rw-r-- 1 alphabraga alphabraga  0 Abr 11 22:43 novas-configs.app
</pre>

<p>Já vemos de cara que eles possuem <code class="highlighter-rouge">inodes</code> diferentes, essa já seria uma diferença de links simbolicos e físicos. Alem disso vemos que existe um caracter <code class="highlighter-rouge">l</code> proximos aos caracteres de permissões. O <code class="highlighter-rouge">l</code> é de link, esse caractere não aparece em links fisicos.</p>

<p>Podemos ainda criar links simbolicos de pastas. Essa já é a segunda diferença entre links fisicos e simbolicos. Veja o exemplo abaixo:</p>

<pre class="language-bash command-line" data-user="alphabraga" data-host="localhost">
<code>mkdir minhas-configs &amp;&amp; cd touch minhas-configs/pricipal.conf minhas-configs/secundaria.conf</code>
<code>ln -s minhas-configs configs</code>
<code>cd configs</code>
<code>ls -l</code>
-rw-rw-r-- 1 alphabraga alphabraga 0 Abr 11 22:41 pricipal.conf
-rw-rw-r-- 1 alphabraga alphabraga 0 Abr 11 22:41 secundaria.conf
</pre>

<p>Já em links a exclusão do arquivo ou pasta na qual um link simbolico aponta causa um problema. Vamos ter um link quebrado que aponta para um lugar que não existe mais. Voltando ao primeiro exemplo dessa sessão onde foi criado um link simbolico chamado <code class="highlighter-rouge">link-novas-configs</code> iremos realizar a exclusão do arquivo <code class="highlighter-rouge">novas-configs.app</code> que é pra onde nosso link aponta.</p>

<pre class="language-bash command-line" data-user="alphabraga" data-host="localhost">
<code>ls -li novas-configs.app link-novas-configs </code>
11010574 lrwxrwxrwx 1 alphabraga alphabraga 17 Abr 11 22:44 link-novas-configs -&gt; novas-configs.app
11010481 -rw-rw-r-- 1 alphabraga alphabraga  0 Abr 11 22:43 novas-configs.app
<code>rm novas-configs.app</code>
<code>cat link-novas-configs </code>
cat: link-novas-configs: Ficheiro ou directoria inexistente
</pre>

<p>A referência foi perdida pois o arquivo na qual o link simbolico faz referencia não existe mais.</p>

<p>E possivel fazer links simbolicos de uma partição apontando um arquivo em outra partição. Veja abaixo:</p>

<pre class="language-bash command-line" data-user="alphabraga" data-host="localhost">
<code>df -h</code>
Sist.fichs      Tama  Ocup Livre Uso% Montado em
udev            1,9G     0  1,9G   0% /dev
tmpfs           385M  6,3M  378M   2% /run
/dev/sda2       231G   71G  149G  33% /
tmpfs           1,9G  4,2M  1,9G   1% /dev/shm
tmpfs           5,0M  4,0K  5,0M   1% /run/lock
tmpfs           1,9G     0  1,9G   0% /sys/fs/cgroup
/dev/sda1       511M  3,5M  508M   1% /boot/efi
tmpfs           385M   52K  385M   1% /run/user/1000
<code>ln -s /boot/efi/teste /link-teste</code>
</pre>

  </div>

</article>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">Livro LPIC 101 - O Curso</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>Livro LPIC 101 - O Curso</li>
          <li><a href="mailto:alfredorodruguesbraga@gmail.com">alfredorodruguesbraga@gmail.com</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/alphabraga"><span class="icon icon--github"><svg viewBox="0 0 16 16"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">alphabraga</span></a>

          </li>
          

          
          <li>
            <a href="https://twitter.com/alphabraga"><span class="icon icon--twitter"><svg viewBox="0 0 16 16"><path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg>
</span><span class="username">alphabraga</span></a>

          </li>
          
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.
</p>
      </div>
    </div>

  </div>

</footer>


  <script type="text/javascript" src="/lpic1/js/prism.js" ></script>  
  </body>

</html>
